const config = {debug: false,defaults: {orientation: 'horizontal',urlHash: false,lazy: false,defaultTab: 0,mobileBreakpoint: 768,},selectors: {tabList: '[role="tablist"]',tab: '[role="tab"]',tabPanel: '[role="tabpanel"]',},classes: {tabList: 'tabs-list',tab: 'tab',tabPanel: 'tab-panel',active: 'active',hidden: 'hidden',loaded: 'loaded',},keys: {left: 'ArrowLeft',right: 'ArrowRight',up: 'ArrowUp',down: 'ArrowDown',home: 'Home',end: 'End',},};const state = {instances: new Map(),initialized: false,};function log(...args) {if (config.debug) {console.log('[Tabs]', ...args);}}function generateId() {return `tabs-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;}function isMobile(breakpoint) {return window.innerWidth < breakpoint;}class Tabs {constructor(element, options = {}) {if (!element) {throw new Error('Tabs requires an element');}this.id = generateId();this.element = element;this.options = { ...config.defaults, ...options };this.tabList = null;this.tabs = [];this.panels = [];this.activeIndex = -1;this.listeners = new Map();this._init();state.instances.set(this.id, this);log('Tabs created', this.id);}_init() {this.tabList = this.element.querySelector(config.selectors.tabList);if (!this.tabList) {throw new Error('Tabs requires a [role="tablist"] element');}this.tabs = Array.from(this.tabList.querySelectorAll(config.selectors.tab));this.panels = Array.from(this.element.querySelectorAll(config.selectors.tabPanel));if (this.tabs.length === 0 || this.panels.length === 0) {throw new Error('Tabs requires at least one tab and panel');}if (this.tabs.length !== this.panels.length) {console.warn('Number of tabs and panels do not match');}this._setupAria();this._setupListeners();const initialTab = this._getInitialTab();this.activate(initialTab);}_setupAria() {this.tabList.setAttribute('role', 'tablist');if (this.options.orientation === 'vertical') {this.tabList.setAttribute('aria-orientation', 'vertical');}this.tabs.forEach((tab, index) => {const panel = this.panels[index];if (!panel) return;const tabId = tab.id || `${this.id}-tab-${index}`;const panelId = panel.id || `${this.id}-panel-${index}`;tab.id = tabId;panel.id = panelId;tab.setAttribute('role', 'tab');tab.setAttribute('aria-controls', panelId);tab.setAttribute('aria-selected', 'false');tab.setAttribute('tabindex', '-1');panel.setAttribute('role', 'tabpanel');panel.setAttribute('aria-labelledby', tabId);panel.setAttribute('tabindex', '0');panel.classList.add(config.classes.hidden);});}_setupListeners() {this.tabs.forEach((tab, index) => {const handler = (e) => {e.preventDefault();this.activate(index);};tab.addEventListener('click', handler);this.listeners.set(`click-${index}`, handler);});const keyHandler = (e) => {this._handleKeyboard(e);};this.tabList.addEventListener('keydown', keyHandler);this.listeners.set('keyboard', keyHandler);if (this.options.urlHash) {const hashHandler = () => {this._handleHashChange();};window.addEventListener('hashchange', hashHandler);this.listeners.set('hashchange', hashHandler);}const resizeHandler = () => {this._handleResize();};window.addEventListener('resize', resizeHandler);this.listeners.set('resize', resizeHandler);}_removeListeners() {this.tabs.forEach((tab, index) => {const handler = this.listeners.get(`click-${index}`);if (handler) {tab.removeEventListener('click', handler);}});const keyHandler = this.listeners.get('keyboard');if (keyHandler) {this.tabList.removeEventListener('keydown', keyHandler);}const hashHandler = this.listeners.get('hashchange');if (hashHandler) {window.removeEventListener('hashchange', hashHandler);}const resizeHandler = this.listeners.get('resize');if (resizeHandler) {window.removeEventListener('resize', resizeHandler);}this.listeners.clear();}_getInitialTab() {if (this.options.urlHash && window.location.hash) {const hash = window.location.hash.slice(1);const index = this.panels.findIndex(panel => panel.id === hash);if (index !== -1) {return index;}}return this.options.defaultTab;}_handleKeyboard(event) {const { key } = event;const { orientation } = this.options;let handled = false;let newIndex = this.activeIndex;if (orientation === 'horizontal') {if (key === config.keys.left) {newIndex = this.activeIndex - 1;handled = true;} else if (key === config.keys.right) {newIndex = this.activeIndex + 1;handled = true;}} else {if (key === config.keys.up) {newIndex = this.activeIndex - 1;handled = true;} else if (key === config.keys.down) {newIndex = this.activeIndex + 1;handled = true;}}if (key === config.keys.home) {newIndex = 0;handled = true;} else if (key === config.keys.end) {newIndex = this.tabs.length - 1;handled = true;}if (handled) {event.preventDefault();if (newIndex < 0) {newIndex = this.tabs.length - 1;} else if (newIndex >= this.tabs.length) {newIndex = 0;}this.activate(newIndex, true);}}_handleHashChange() {if (!window.location.hash) return;const hash = window.location.hash.slice(1);const index = this.panels.findIndex(panel => panel.id === hash);if (index !== -1 && index !== this.activeIndex) {this.activate(index);}}_handleResize() {const mobile = isMobile(this.options.mobileBreakpoint);if (mobile) {this.element.classList.add('tabs-mobile');} else {this.element.classList.remove('tabs-mobile');}}_loadPanel(index) {const panel = this.panels[index];if (!panel || panel.classList.contains(config.classes.loaded)) {return;}if (this.options.lazy) {this._emit('load', { index, panel });panel.classList.add(config.classes.loaded);}}activate(index, focusTab = false) {if (index < 0 || index >= this.tabs.length) {log('Invalid tab index', index);return this;}if (index === this.activeIndex) {log('Tab already active', index);return this;}const previousIndex = this.activeIndex;const tab = this.tabs[index];const panel = this.panels[index];log('Activating tab', index);this._emit('before-change', { index, previousIndex, tab, panel });this.tabs.forEach((t, _i) => {t.setAttribute('aria-selected', 'false');t.setAttribute('tabindex', '-1');t.classList.remove(config.classes.active);});this.panels.forEach(p => {p.classList.add(config.classes.hidden);});tab.setAttribute('aria-selected', 'true');tab.setAttribute('tabindex', '0');tab.classList.add(config.classes.active);if (focusTab) {tab.focus();}panel.classList.remove(config.classes.hidden);this._loadPanel(index);if (this.options.urlHash) {const newHash = `#${panel.id}`;if (window.location.hash !== newHash) {history.pushState(null, '', newHash);}}this.activeIndex = index;this._emit('change', { index, previousIndex, tab, panel });return this;}next() {const nextIndex = (this.activeIndex + 1) % this.tabs.length;return this.activate(nextIndex);}previous() {const prevIndex = this.activeIndex - 1 < 0 ? this.tabs.length - 1 : this.activeIndex - 1;return this.activate(prevIndex);}getActive() {return this.activeIndex;}getCount() {return this.tabs.length;}disable(index) {if (index < 0 || index >= this.tabs.length) return this;const tab = this.tabs[index];tab.setAttribute('aria-disabled', 'true');tab.setAttribute('tabindex', '-1');return this;}enable(index) {if (index < 0 || index >= this.tabs.length) return this;const tab = this.tabs[index];tab.removeAttribute('aria-disabled');if (index === this.activeIndex) {tab.setAttribute('tabindex', '0');}return this;}_emit(eventName, detail = {}) {const event = new CustomEvent(`tabs:${eventName}`, {detail: { tabsId: this.id, ...detail },});window.dispatchEvent(event);this.element.dispatchEvent(new CustomEvent(eventName, { detail }));}on(eventName, handler) {this.element.addEventListener(eventName, handler);return this;}off(eventName, handler) {this.element.removeEventListener(eventName, handler);return this;}destroy() {this._removeListeners();state.instances.delete(this.id);log('Tabs destroyed', this.id);}}function init(element, options = {}) {if (!element) {throw new Error('Tabs.init requires an element');}return new Tabs(element, options);}function initAll(selector = '[data-tabs]', options = {}) {const elements = document.querySelectorAll(selector);const instances = [];elements.forEach(element => {instances.push(new Tabs(element, options));});return instances;}function getById(id) {return state.instances.get(id);}function getAll() {return Array.from(state.instances.values());}function configure(options) {Object.assign(config.defaults, options);log('Configuration updated', config.defaults);}function enableDebug() {config.debug = true;log('Debug mode enabled');}function disableDebug() {config.debug = false;}function getState() {return {initialized: state.initialized,totalInstances: state.instances.size,};}if (typeof window !== 'undefined') {window.Tabs = Tabs;window.TabsAPI = {Tabs,init,initAll,getById,getAll,configure,enableDebug,disableDebug,getState,};}