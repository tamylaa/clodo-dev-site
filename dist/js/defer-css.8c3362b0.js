(function() {'use strict';window.__deferCssDebug = {started: Date.now(),logs: []};function debugLog(msg) {const timestamp = Date.now() - window.__deferCssDebug.started;window.__deferCssDebug.logs.push(`[${timestamp}ms] ${msg}`);console.log('[defer-css]', msg);}debugLog('Script started');const assetManifest = window.__assetManifest__ || {};debugLog('Asset manifest loaded: ' + Object.keys(assetManifest).length + ' entries');const deferredStyles = {'index': assetManifest['styles-index-deferred.css'] ? '/' + assetManifest['styles-index-deferred.css'] : '/styles-index-deferred.css','common': assetManifest['css/components-deferred.css'] ? '/' + assetManifest['css/components-deferred.css'] : '/css/components-deferred.css'};debugLog('Deferred styles resolved: ' + JSON.stringify(deferredStyles));function loadDeferredCSS(href) {debugLog('Loading deferred CSS: ' + href);const link = document.createElement('link');link.rel = 'stylesheet';link.href = href;link.media = 'print';link.onload = function() {debugLog('CSS loaded (onload): ' + href + ', setting media to all');this.media = 'all';};link.onerror = function() {debugLog('ERROR loading CSS: ' + href);};setTimeout(function() {debugLog('Timeout fired for ' + href + ', setting media to all');link.media = 'all';}, 3000);document.head.appendChild(link);debugLog('Link element appended to head: ' + href);}function loadPageDeferredCSS() {debugLog('loadPageDeferredCSS called');debugLog('document.readyState: ' + document.readyState);debugLog('document.head: ' + (document.head ? 'exists' : 'MISSING'));if (deferredStyles['common']) {debugLog('Loading common deferred styles');loadDeferredCSS(deferredStyles['common']);} else {debugLog('No common deferred styles');}const isIndex = document.body.classList.contains('home') ||window.location.pathname === '/' ||window.location.pathname === '/index.html';debugLog('Is index page: ' + isIndex + ' (pathname: ' + window.location.pathname + ')');if (isIndex && deferredStyles['index']) {debugLog('Loading index deferred styles');loadDeferredCSS(deferredStyles['index']);} else {debugLog('Not loading index styles');}}if (document.readyState === 'loading') {debugLog('Document loading, waiting for DOMContentLoaded');document.addEventListener('DOMContentLoaded', function() {debugLog('DOMContentLoaded fired');requestAnimationFrame(function() {debugLog('requestAnimationFrame fired');setTimeout(loadPageDeferredCSS, 100);});});} else {debugLog('Document already loaded, calling immediately');requestAnimationFrame(function() {debugLog('requestAnimationFrame fired');setTimeout(loadPageDeferredCSS, 100);});}})();